#!/bin/bash
display_error() {
	tput sgr0
	tput setaf 1
	echo "ERROR: $1" >&2
	tput sgr0
	exit 1
}

[[ "$1" == "" ]] && 
	display_error "Please specifiy the version"

fuzzy_match=`ls $GVM_ROOT/gos | grep "$1"` ||
	display_error "Invalid version $1"

if [ -d $GVM_ROOT/gos/$fuzzy_match ]; then
  rm -rf $GVM_ROOT/gos/$fuzzy_match
  rm -rf $GVM_ROOT/pkgsets/$fuzzy_match
	rm -f $GVM_ROOT/environments/$fuzzy_match
	rm -f "$GVM_ROOT/environments/$fuzzy_match@"*
  echo "Uninstalled version $fuzzy_match"
else
  display_error "Invalid version"
fi

